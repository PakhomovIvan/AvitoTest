## Обзор проекта

Этот проект представляет собой базовый клон Avito, популярной платформы онлайн-объявлений. Он позволяет пользователям создавать, редактировать и просматривать объявления в трех основных категориях: Недвижимость, Автомобили и Услуги. Приложение построено с использованием React и использует предоставленный API для управления данными объявлений.

Дополнительно проект опубликован по адресу: http://v2732210.hosted-by-vdsina.ru:8181/

## Содержание
 - [1. Структура проекта](#structure)
 - [2. Использованные технологии](#2-использованные-технологии)
     - [Обоснование выбора технологий](#обоснование-выбора-технологий)   
 - [3. Инструкция по установке](#3-инструкция-по-установке)
 - [4. Запуск проекта](#4-запуск-проекта)
 - [5. Использование API](#5-использование-api)
 - [6. Функциональные требования](#6-функциональные-требования)
     - [Размещение объявлений](#размещение-объявлений)
     - [Список объявлений](#список-объявлений)
     - [Просмотр и редактирование объявлений](#просмотр-и-редактирование-объявлений)
 - [7. Маршрутизация](#7-маршрутизация)
 - [8. Модели данных](#8-модели-данных)
 - [9. Соглашения о стиле кода](#9-соглашения-о-стиле-кода)
 - [10. Состояние](#10-состояние)
 - [12. Компоненты](#12-компоненты)
 - [12. Redux](#12-redux)
 - [13. Интеграторы](#13-интеграторы)
 - [14. Вспомогательные компоненты](#14-вспомогательные-компоненты)
 - [15. Вспомогательные утилиты](#15-вспомогательные-утилиты)
 - [16. Вспомогательные модели](#16-вспомогательные-модели)

## <a name="structure">1. Структура проекта</a>

```
📦 AvitoTest
├─ server
│  ├─ Dockerfile
│  ├─ app.js
├─ src
│  ├─ App.scss
│  ├─ App.tsx
│  ├─ Common
│  │  ├─ Components
│  │  │  └─ Forms
│  │  │     ├─ CarTypeForm.tsx
│  │  │     ├─ MainForm.tsx
│  │  │     ├─ RealtyTypeForm.tsx
│  │  │     └─ ServiceTypeForm.tsx
│  │  └─ Models
│  │     ├─ AdFormValues.ts
│  │     ├─ AdParams.ts
│  │     ├─ AdType.ts
│  │     ├─ AdsInitialState.ts
│  │     ├─ SelectedAdInitialState.ts
│  │     ├─ SelectedType.ts
│  │     ├─ TypeFormProps.ts
│  │     └─ TypeModels
│  │        ├─ CarAd.ts
│  │        ├─ RealtyAd.ts
│  │        └─ ServicesAd.ts
│  ├─ Layouts
│  │  ├─ MainLayout.module.scss
│  │  └─ MainLayout.tsx
│  ├─ Pages
│  │  ├─ AdPage
│  │  │  ├─ AdPage.module.scss
│  │  │  └─ AdPage.tsx
│  │  ├─ AdsListPage
│  │  │  ├─ AdsListPage.module.scss
│  │  │  └─ AdsListPage.tsx
│  │  ├─ FormPage
│  │  │  ├─ FormPage..module.scss
│  │  │  └─ FormPage.tsx
│  │  └─ NotFoundPage
│  │     └─ NotFoundPage.tsx
│  ├─ Shared
│  │  ├─ search
│  │  │  ├─ SearchInput.tsx
│  │  │  └─ SearchInputProps.ts
│  │  ├─ spinner
│  │  │  ├─ Spinner.tsx
│  │  │  └─ SpinnerParams.ts
│  │  └─ toast
│  │     ├─ ShowToast.tsx
│  │     ├─ ToastParams.ts
│  │     └─ ToastType.ts
│  ├─ Stores
│  │  ├─ slices
│  │  │  ├─ adsSlice.ts
│  │  │  ├─ selectedAdSlice.ts
│  │  │  ├─ spinnerSlice.ts
│  │  │  └─ toastSlice.ts
│  │  └─ store.ts
│  ├─ main.tsx
│  └─ vite-env.d.ts
├─ tsconfig.app.json
├─ tsconfig.json
├─ tsconfig.node.json
└─ vite.config.ts
```

## 2. Использованные технологии

*   **React (v18+)**: JavaScript-библиотека для создания пользовательских интерфейсов.
*   **TypeScript**: Расширение JavaScript, добавляющее статическую типизацию.
*   **react-router-dom**: Библиотека для маршрутизации в React-приложениях.
*   **Redux**: Контейнер состояния для JavaScript-приложений.
*   **Redux Toolkit**: Упрощает разработку Redux.
*   **PrimeReact**: Набор UI-компонентов для React.
*   **Axios**: Promise-based HTTP-клиент для выполнения API-запросов.
*   **Vite**: Быстрый инструмент сборки для современной веб-разработки.
*   **ESLint**: Линтер для обеспечения стиля кода и предотвращения ошибок.
*   **Prettier**: Форматировщик кода для обеспечения согласованности стиля кода.
*   **SASS/SCSS**: Препроцессор CSS, улучшающий структуру и возможности стилей.

### Обоснование выбора технологий

*   **React**: Выбран из-за компонентной архитектуры, виртуального DOM и большого сообщества, что делает его идеальным для создания сложных пользовательских интерфейсов.
*   **TypeScript**: Выбран для улучшения поддержки кода и уменьшения количества ошибок во время выполнения за счет статической типизации.
*   **react-router-dom**: Используется для управления маршрутизацией на стороне клиента и навигацией.
*   **Redux & Redux Toolkit**: Используется для централизованного управления состоянием, упрощения потока данных и обработки асинхронных действий. Redux Toolkit упрощает настройку Redux и уменьшает количество шаблонного кода.
*   **PrimeReact**: Предоставляет полный набор доступных UI-компонентов, ускоряя разработку и обеспечивая согласованный внешний вид.
*   **Axios**: Выбран из-за простоты использования и поддержки таких функций, как отмена запросов.
*   **Vite**: Выбран из-за быстрого сервера разработки и оптимизированных производственных сборок.
*   **ESLint & Prettier**: Используются для обеспечения согласованного стиля кода и выявления потенциальных ошибок на ранней стадии разработки.
*   **SASS/SCSS**: Использование препроцессора стилей позволяет структурировать и упростить CSS, повышая читаемость и поддерживаемость.

## 3. Инструкция по установке

1.  **Клонируйте репозиторий:**

    ```bash
    git clone https://github.com/PakhomovIvan/AvitoTest.git
    cd avitotest
    ```

2.  **Установите зависимости клиента:**

    ```bash
    npm i
    ```

## 4. Запуск проекта

1.  **Запустите клиент:**

   Реализована сборка проекта и запуск в контейнеризированной среде - Docker.
   Для запуска, в корне проекта воспользуйтесь командой: 

   ```bash
    docker compose up
   ```
   
   При использовании VS Code:

   ```bash
    npm run dev
   ```

   Это запустит сервер разработки React.

3.  **Запустите API:**
    API находится в папке `server` и будет запущено на порту 4000.
    Перейдите в каталог `server`, установите зависимости `npm i` и запустите скрипт запуска `npm run start`

6.  **Откройте приложение:**
    В браузере перейдите по адресу, указанному Vite (`http://localhost:8181`).

## 5. Использование API

Фронтенд взаимодействует с API бэкенда (расположенным в каталоге `server`) для управления данными объявлений. API предоставляет следующие endpoints:

*   `GET /items`: Получает список всех объявлений.
*   `GET /items/:id`: Получает конкретное объявление по ID.
*   `POST /items`: Создает новое объявление.
*   `PUT /items/:id`: Обновляет существующее объявление.
*   `DELETE /items/:id`: Удаляет объявление.

Функции для взаимодействия с API находятся непосредственно в компонентах, использующих `axios`.

## 6. Функциональные требования

### Размещение объявлений

*   Маршрут `/form` позволяет пользователям создавать новые объявления.
*   Форма разделена на два шага:
    *   **Основная информация**:
        *   `Название` (обязательно)
        *   `Описание` (обязательно)
        *   `Местоположение` (обязательно)
        *   `Фото` (необязательно)
        *   `Тип объявления` (обязательно, выпадающий список: Недвижимость, Автомобили, Услуги)
    *   **Информация, специфичная для категории**:
        *   Поля на этом этапе зависят от выбранной категории:
            *   **Недвижимость**:
                *   `Тип недвижимости` (обязательно, выпадающий список)
                *   `Площадь` (обязательно, число)
                *   `Количество комнат` (обязательно, число)
                *   `Цена` (обязательно, число)
            *   **Автомобили**:
                *   `Марка` (обязательно, выпадающий список)
                *   `Модель` (обязательно, строка)
                *   `Год выпуска` (обязательно, число)
                *   `Пробег` (необязательно, число)
            *   **Услуги**:
                *   `Тип услуги` (обязательно, выпадающий список)
                *   `Опыт работы` (обязательно, число)
                *   `Стоимость` (обязательно, число)
                *   `График работы` (необязательно, строка)
*   Реализована проверка формы, чтобы убедиться, что все обязательные поля заполнены.

### Список объявлений

*   Маршрут `/list` отображает список всех объявлений.
*   На каждой странице отображается не более 5 объявлений.
*   Каждый предварительный просмотр объявления включает в себя:
    *   Фото (или placeholder, если фото недоступно)
    *   Название
    *   Местоположение
    *   Категорию
*   Кнопку "Открыть", которая перенаправляет на маршрут `/list/:id`.
*   Кнопку "Разместить объявление", которая перенаправляет на маршрут `/form`.
*   Реализован поиск объявления по названию.
*   Реализована пагинация (на стороне клиента).
*   Реализована фильтрация по категории объявления.

### Просмотр и редактирование объявлений

*   Маршрут `/list/:id` отображает подробное представление конкретного объявления.
*   На странице отображаются все детали объявления.
*   Кнопка "Удалить" удалит объявление с сервера и перенаправит на маршрут `/list`.
*   Кнопка "Редактировать" перенаправляет на маршрут `/form` с предварительно заполненными данными, позволяя пользователю редактировать объявление.

## 7. Маршрутизация

Приложение использует `react-router-dom` для маршрутизации на стороне клиента. Определены следующие маршруты:

*   `/form`: Форма размещения и редактирования объявлений.
*   `/list`: Список объявлений.
*   `/list/:id`: Подробное представление объявления.

## 8. Модели данных

Приложение использует следующие модели данных, определенные как интерфейсы TypeScript в каталоге `src/models`:

```typescript
// src/models/AdParams.ts
export interface AdParams {
  id: number;
  name: string;
  description: string;
  location: string;
  type: AdType; // "Недвижимость", "Авто", "Услуги"
  image?: string;
}

// src/models/AdType.ts
export type AdType = 'Недвижимость' | 'Авто' | 'Услуги';
```

## 9. Соглашения о стиле кода
Проект следует согласованному стилю кода, обеспечиваемому ESLint и Prettier.
React-компоненты написаны как функциональные компоненты с использованием хуков.
TypeScript широко используется для обеспечения безопасности типов.


## 10. Состояние
Состояние приложения управляется с помощью Redux. Вы можете найти слайсы, которые управляют состоянием, в директории src/Stores/slices/:/
 - adsSlice - Состояние, связанное с объявлениями (например, список объявлений).
 - selectedAdSlice - Состояние, связанное с выбранным объявлением (например, редактирование).
 - spinnerSlice - Состояние для отображения спиннера загрузки.
 - toastSlice - Состояние для отображения уведомлений (toast-сообщений).

## 12. Компоненты
Компоненты React находятся в каталоге src/components и организованы по категориям:

 - AdPage: Компонент для отображения одной страницы объявления.
 - AdsList: Компонент для отображения списка объявлений.
 - AdsForm: Компонент для создания и обновления объявлений.
 - MainForm: Компонент, содержащий основные поля формы для всех типов объявлений.
 - RealtyTypeForm: Компонент, содержащий поля, специфичные для объявлений о недвижимости.
 - CarTypeForm: Компонент, содержащий поля, специфичные для автомобильных объявлений.
 - ServiceTypeForm: Компонент, содержащий поля, специфичные для объявлений об услугах.
 - MainLayout: Компонент макета, который оборачивает все страницы и обеспечивает общий контейнер.
 - NotFoundPage: Компонент для отображения ошибки 404, когда маршрут не найден.
 - SearchInput: Компонент для строки поиска объявлений.
 - Spinner: Компонент для отображения загрузки.
 - ShowToast: Компонент для отображения информационных сообщений.

## 12. Redux
Redux используется для управления состоянием приложения./

Вот основные разделы:
 - store.ts: Здесь настраивается Redux store с различными редукторами (слайсами).
 - slices: Каталог, содержащий отдельные слайсы Redux, каждый из которых отвечает за управление конкретной частью состояния приложения.

## 13. Интеграторы
axios - Библиотека, используемая для создания и управления HTTP-запросами. Настроена перехватывать запросы и отображать сообщения об ошибках пользователю.

## 14. Вспомогательные компоненты
ShowToast и Spinner - вспомогательные компоненты, предназначенные для отображения UI при загрузке информации, или для информирования пользователя о результате его действий.

## 15. Вспомогательные утилиты
useDebounce - Хук, позволяющий сделать запрос не мгновенно при вводе пользователем информации, а с задержкой, что позволяет минимизировать обращения к сереру (в данном проекте используется сортировка состояния).

## 16. Вспомогательные модели
AdFormValues,AdsInitialState, SearchInputProps, SelectedAdInitialState, ServiceTypeFormProps, SpinnerParams, ToastParams - наборы интерфейсов, для строгой типизации данных.
